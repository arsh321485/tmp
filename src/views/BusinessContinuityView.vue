<template>
    <div id="top">
        <MainNavbar />
        <RegulatoryWidget />

        <section class="cyber-hero position-relative delayed-section" style="animation-delay: 100ms;">
            <!-- Background image -->
            <div class="cyber-bg"></div>

            <!-- Content area -->
            <div class="container content-wrap d-flex flex-column justify-content-center">

                <!-- Small icon -->
                <div class="cyber-icon mb-3">
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>

                <!-- Title -->
                <h1 class="cyber-title">Business Continuity Preparedness</h1>

                <!-- Description -->
                <p class="cyber-desc">
                    Operations don’t stop for disruptions — neither should your response.<br />
                    BC plans only work if people, vendors, and processes do.
                    TMP ensures every stakeholder knows exactly what to do when disruption strikes.
                </p>

                <!-- Small CTA Button -->
                <div class="cta-row">
                    <button class="btn btn-light btn-sm cyber-btn-sm">
                        Check BC Preparedness →
                    </button>
                </div>
            </div>

            <!-- Breadcrumb pill -->
            <div class="breadcrumb-pill d-flex align-items-center">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item"><a href="/" class="text-decoration-none">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Business Continuity Preparedness</li>
                    </ol>
                </nav>
            </div>
        </section>


        <section class="cyber-reality container py-5 delayed-section" aria-labelledby="cyber-reality-title"
            style="animation-delay: 300ms;">

            <div class="header mb-4">
                <h2 id="cyber-reality-title" class="cyber-section-title">The Business Reality</h2>
                <p class="cyber-section-sub">Real BC Challenges Organizations Face
                </p>
            </div>

            <div class="cyber-grid">
                <!-- 1 -->
                <article class="cyber-card" aria-labelledby="pr1-title">
                    <div class="cyber-left">
                        <div class="cyber-number">01</div>
                    </div>
                    <div class="cyber-right">
                        <h3 id="pr1-title" class="cyber-card-title">BC documentation is abundant—BC readiness is not.
                        </h3>
                        <p class="cyber-card-body">
                            Organizations have 100–400 pages of continuity documents…
                            but no practiced execution.
                        </p>

                        <ul class="cyber-list">
                            <li>COrganizations often have extensive continuity documentation (100–400 pages) but lack
                                practiced execution to ensure actual readiness.</li>
                            <li>Recovery roles are frequently unclear during disruptions</li>
                            <li>leading to confusion about who declares a crisis, contacts vendors, approves failover,
                                or communicates with customers.</li>

                        </ul>
                    </div>
                </article>

                <!-- 2 -->
                <article class="cyber-card" aria-labelledby="pr2-title">
                    <div class="cyber-left">
                        <div class="cyber-number">02</div>
                    </div>
                    <div class="cyber-right">
                        <h3 id="pr2-title" class="cyber-card-title">Recovery roles are unclear</h3>
                        <p class="cyber-card-body">
                            During disruptions:
                        </p>
                        <ul class="cyber-list">
                            <li>who declares a crisis?</li>
                            <li>who contacts the vendor?</li>
                            <li>who approves failover?</li>
                            <li>who communicates to customers?</li>

                        </ul>
                        <p class="cyber-card-note"><strong>Most teams don't know.</strong></p>
                    </div>
                </article>

                <!-- 3 -->
                <article class="cyber-card" aria-labelledby="pr3-title">
                    <div class="cyber-left">
                        <div class="cyber-number">03</div>
                    </div>
                    <div class="cyber-right">
                        <h3 id="pr3-title" class="cyber-card-title"> Dependencies are invisible</h3>
                        <p class="cyber-card-body">
                            BC doesn't fail at the main system—
                            it fails at the hidden dependency that nobody mapped.
                        </p>

                        <ul class="cyber-list">
                            <li>Hidden dependencies can cause business continuity failures.</li>
                            <li> often it’s the small, unmapped dependencies that break, not the main systems. </li>
                            <li>Third-party vendors are the weakest link</li>

                        </ul>

                       
                    </div>
                </article>

                <!-- 4 -->
                <article class="cyber-card" aria-labelledby="pr4-title">
                    <div class="cyber-left">
                        <div class="cyber-number">04</div>
                    </div>
                    <div class="cyber-right">
                        <h3 id="pr4-title" class="cyber-card-title">Vendors are the weakest BC link</h3>
                        <p class="cyber-card-body">
                        Over 60% of disruptions come from third parties.
                        </p>
                        <ul class="cyber-list">
                            <li> over 60% of disruptions come from vendor failures, and most companies have never validated vendor continuity readiness</li>
                            <li>Coordinating cross-functional business continuity drills typically takes weeks</li>
                            <li> whereas TMP enables instant collaboration for drills and testing.</li>
                           
                        </ul>
                        <p class="cyber-card-note"> <strong> Most companies have never validated vendor readiness.</strong>
                        </p>
                    </div>
                </article>

                <!-- 5 -->
                <article class="cyber-card" aria-labelledby="pr5-title">
                    <div class="cyber-left">
                        <div class="cyber-number">05</div>
                    </div>
                    <div class="cyber-right">
                        <h3 id="pr5-title" class="cyber-card-title">Coordination takes weeks
                        </h3>
                        <p class="cyber-card-body">
                           Scheduling cross-functional BC drills is nearly impossible.
                        </p>
                        <ul class="cyber-list">
                            <li>leading to confusion about who declares a crisis, contacts vendors, approves failover, or communicates with customers.</li>
                            <li>often it’s the small, unmapped dependencies that break, not the main systems.</li>
                            <li>Recovery roles are frequently unclear during disruptions, leading to confusion about who declares a crisis, contacts vendors, approves failover, or communicates with customers.</li>
                        </ul>
                        <p class="cyber-card-note"><strong> TMP makes it instant.</strong></p>
                    </div>
                </article>
            </div>
        </section>


        <section class="steps-hero py-5 delayed-section" aria-labelledby="tmp-solves-title"
            style="animation-delay: 500ms;">

            <div class="container">

                <header class="mb-4 steps-left">
                    <h2 id="tmp-solves-title" class="Steps-title" style="font-weight: 600;">How TMP Delivers BC Preparedness</h2>
                    <p class="section-sub">Practical, continuous, and auditor-ready capabilities that close the people
                        &amp;
                        process gap.</p>
                </header>

                <div class="solves-wrap">
                    <!-- Tabs (left on desktop, top on mobile) -->
                    <nav class="tabs" role="tablist" :aria-orientation="isMobile ? 'horizontal' : 'vertical'">
                        <button v-for="(t, i) in tabs" :key="t.id" :id="'tab-' + t.id"
                            :class="['tab-btn', { active: active === i }]" role="tab"
                            :aria-selected="active === i ? 'true' : 'false'" :aria-controls="'panel-' + t.id"
                            @click="setActive(i)" @keyup.enter.space.prevent="setActive(i)">
                            <span class="tab-num">{{ (i + 1).toString().padStart(2, '0') }}</span>
                            <span class="tab-label">{{ t.title }}</span>
                        </button>
                    </nav>

                    <!-- Content panels -->
                    <div class="panels">
                        <article v-for="(t, i) in tabs" :key="t.id" :id="'panel-' + t.id" class="panel" role="tabpanel"
                            :aria-labelledby="'tab-' + t.id" v-show="active === i">
                            <h3 class="panel-title">{{ t.title }}</h3>
                            <p class="panel-desc" v-if="t.intro">{{ t.intro }}</p>

                            <div v-if="t.examples && t.examples.length" class="panel-examples">
                                <strong class="examples-label">Examples:</strong>
                                <ul class="examples-list">
                                    <li v-for="(ex, k) in t.examples" :key="k">{{ ex }}</li>
                                </ul>
                            </div>

                            <div v-if="t.items && t.items.length" class="panel-steps">
                                <strong class="examples-label">Key steps:</strong>
                                <ul class="steps-list">
                                    <li v-for="(it, j) in t.items" :key="j">{{ it }}</li>
                                </ul>
                            </div>

                            <p v-if="t.note" class="panel-note"><strong>{{ t.note }}</strong></p>
                        </article>
                    </div>
                </div>

            </div>
        </section>

        <MainContact />
        <!-- FOOTER -->
        <MainFooter />
    </div>
</template>

<script lang="ts">
import { defineComponent } from "vue";
import MainNavbar from "../components/MainNavbar.vue";
import MainFooter from "../components/MainFooter.vue";
import MainContact from "@/components/MainContact.vue";
import RegulatoryWidget from "@/components/RegulatoryWidget.vue";

type Tab = {
    id: string;
    title: string;
    intro?: string;
    examples?: string[];
    items?: string[];
    note?: string;
};

export default defineComponent({
    name: "BusinessContinuity",
    components: {
        MainNavbar,
        RegulatoryWidget,
        MainFooter,
        MainContact
    },

    data() {
        return {
            active: 0 as number,
            resizeHandlerFn: null as null | (() => void), // FIXED (no _)
            tabs: [
                {
                    id: "sim",
                    title: "End-to-End BC Recovery Simulations",
                    intro:
                        "Simulate real-life disruptions:",
                    examples: [
                        "SAP outage",
                        "Cloud provider downtime",
                        "Network blackout",
                        "Call-center outage",
                        "CRM outage",
                        "BHR/Payroll disruption",
                        "Logistics failures",
                        "Facility unavailability",
                    ],
                    note: "TMP orchestrates actions across departments automatically."
                },
                {
                    id: "workflows",
                    title: "Automated RTO/RPO Validation",
                    intro: "TMP measures if your targets are:",
                    items: [
                        "achievable",
                        "consistent",
                        "aligned with business needs",
                       
                    ],
                    note: "RTO/RPO failures get flagged automatically.",
                },
                {
                    id: "metrics",
                    title: " Cross-Departmental BC Coordination",
                    intro:
                        "TMP sequences tasks across:",
                    items: [
                        "IT",
                        "Operations",
                        "HR",
                        "Finance",
                        "Customer Support",
                        "Facilities",
                        "Vendors"
                    ],
                    note: "Each receives only the tasks relevant to them.",
                },
                {
                    id: "improve",
                    title: "Dependency Mapping & Stress Testing",
                    intro:
                        "TMP visualizes:",
                    items: [
                        "system-to-system dependencies",
                        "vendor criticality",
                        "process choke points",
                        "single points of failure",
                       
                    ],
                    note: "This replaces hundreds of hours of manual BIAs.",
                },
                {
                    id: "evidence",
                    title: "ISO 22301 Aligned BC Evidence",
                    intro: "Automatic BC documentation including:",
                    items: [
                        "recovery timeline logs",
                        'decision justification',
                        "communication trail",
                        "leadership approvals",
                        "BIA validation",
                        "test summary",
                        "improvement plan",
                    ],
                },
            ] as Tab[],
        };
    },

    computed: {
        isMobile(): boolean {
            return window.innerWidth <= 768;
        },
    },

    mounted() {
        this.resizeHandlerFn = () => {
            this.$forceUpdate();
        };
        window.addEventListener("resize", this.resizeHandlerFn);
    },

    beforeUnmount() {
        if (this.resizeHandlerFn) {
            window.removeEventListener("resize", this.resizeHandlerFn);
        }
    },

    methods: {
        setActive(index: number) {
            this.active = index;

            this.$nextTick(() => {
                // FIX: safely reference tab
                const tab = this.tabs[index];
                if (!tab) return;

                const el = document.getElementById("tab-" + tab.id) as HTMLElement | null;
                if (el) el.focus();
            });
        },
    },
});
</script>
